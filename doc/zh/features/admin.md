# 管理面板

Bonds 包含管理面板，用于系统级配置和用户管理。

## 管理面板

拥有管理员权限的用户可以访问管理面板来配置：

- **系统设置** — 所有存储在数据库中的应用级配置
- **用户管理** — 查看和管理所有注册用户
- **备份** — 配置自动备份和触发手动备份

## 系统设置

从 v0.2.0 开始，大部分配置已从环境变量迁移到数据库存储。管理面板提供 Web UI 来配置：

| 类别 | 设置项 |
|------|--------|
| **常规** | 应用名称、URL、公告横幅 |
| **SMTP** | 邮件服务器地址、端口、凭证、发件人 |
| **OAuth** | GitHub 和 Google OAuth 客户端凭证 |
| **OIDC** | OpenID Connect 提供商（SSO） |
| **WebAuthn** | Relying Party ID、显示名、允许的来源 |
| **Telegram** | Bot Token（用于通知） |
| **地理编码** | 服务提供商和 API Key |
| **备份** | Cron 调度、保留天数 |

::: tip
首次启动时，这些设置会从环境变量中读取作为初始值。之后所有修改都通过管理面板进行。
:::

## 个性化设置 {#个性化设置}

账户所有者可通过个性化设置自定义 Bonds 的多个方面，API 路径为 `/api/settings/personalize/:entity`：

| 实体 | 可自定义内容 |
|------|-------------|
| `genders` | 性别选项 |
| `pronouns` | 代词选项 |
| `address-types` | 地址类型标签 |
| `pet-categories` | 宠物类别 |
| `contact-info-types` | 联系方式类型（邮箱、电话等） |
| `call-reasons` | 通话原因分类 |
| `religions` | 宗教选项 |
| `gift-occasions` | 礼物场合类型 |
| `gift-states` | 礼物追踪状态 |
| `group-types` | 联系人分组类型 |
| `post-templates` | 日记模板 |
| `relationship-types` | 关系类型定义 |
| `templates` | 联系人页面模板 |
| `modules` | 模块配置 |
| `currencies` | 货币偏好 |

部分内置项（如邮箱和电话联系方式类型）不可删除。

## 用户邀请

通过邮件邀请他人加入你的账户：

1. 前往设置 → 邀请
2. 输入收件人邮箱并选择权限级别
3. 系统发送包含邀请链接的邮件（7 天内有效）
4. 收件人创建账户并自动关联到你的账户

权限级别：**管理者**（100）、**编辑者**（200）、**查看者**（300）。

## 备份系统

Bonds 内置自动备份系统：

- **定时备份** — 在管理面板中配置 Cron 调度（6 字段格式含秒，如 `0 0 2 * * *` 表示每天凌晨 2 点）
- **手动备份** — 在管理面板中按需触发备份
- **保留策略** — 旧备份在可配置天数后自动清理（默认 30 天）
- **存储位置** — 备份存储在 `BACKUP_DIR` 配置的目录中（默认 `data/backups`）
